(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._alt=e.alt,this._cardSelector=n,this._openImage=o}var n,o;return n=t,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__cards").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".elements__rectangle").src=this._link,this._element.querySelector(".elements__rectangle").alt=this._name,this._element.querySelector(".elements__text").textContent=this._name,this._element}},{key:"_handleLikeClick",value:function(){this._element.querySelector(".elements__like").classList.toggle("elements__like_active")}},{key:"_handleDeleteClick",value:function(){this._element.querySelector(".elements__delete").closest(".elements__cards").remove()}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("click",(function(t){t.target.classList.contains("elements__delete")?e._handleDeleteClick():t.target.classList.contains("elements__like")?e._handleLikeClick():e._openImage(e._name,e._link)}))}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(t,o){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=o,this._obj=t,this._button=this._formElement.querySelector(this._obj.submitButtonSelector),this._inputs=function(e){if(Array.isArray(e))return n(e)}(r=this._formElement.querySelectorAll(this._obj.inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._addListenersToForm()}},{key:"_addListenersToForm",value:function(){this._addListenersToInputs(this._inputs),this.setSubmitButtonState()}},{key:"_addListenersToInputs",value:function(e){var t=this;e.forEach((function(e){e.addEventListener("input",(function(e){t._handleFieldValidation(e)}))}))}},{key:"setSubmitButtonState",value:function(){this._button.disabled=!this._formElement.checkValidity(),this._button.classList.toggle(this._obj.inactiveButtonClass,!this._formElement.checkValidity())}},{key:"_handleFieldValidation",value:function(e){var t=e.target;t.setCustomValidity("");var n=document.querySelector("#".concat(t.id,"-error"));this._validateLength(t),this._validateValueMissing(t),n.textContent=t.validationMessage,t.classList.toggle(this._obj.inputErrorClass,!t.validity.valid),this.setSubmitButtonState()}},{key:"_validateLength",value:function(e){(e.validity.tooShort||e.validity.tooLong)&&e.setCustomValidity("Введите от ".concat(e.minLength," до ").concat(e.maxLength," символов"))}},{key:"_validateValueMissing",value:function(e){e.validity.valueMissing&&e.setCustomValidity("Заполните поле")}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),i=document.querySelector(".popup-profileforms"),a=document.querySelector(".popup-cardforms"),l=document.querySelector(".popup-profile"),s=document.querySelector(".popup-card"),u=l.querySelector(".popup__close"),c=document.querySelector(".profile__image"),p=document.querySelector(".profile__button"),d=s.querySelector(".popup__closecard"),m=document.querySelector(".popup-image"),_=m.querySelector(".popup__closeimage"),f=document.querySelector(".profile__text"),v=document.querySelector(".profile__subtitle"),y=document.querySelector(".popup__explane_name-pp"),h=document.querySelector(".popup__explane_job-pp"),k=document.querySelector(".popup__profileform"),S=document.querySelector(".popup__cardform"),b=document.querySelector(".popup__photo"),g=document.querySelector(".popup__figcaption"),L=document.querySelector(".popup__explane_names-pp"),q=document.querySelector(".popup__explane_photos-pp"),E={forms:".popup__forms",inputSelector:".popup__explane",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_invalid",inputErrorClass:"popup__explane_invalid"},C=new r(E,i),x=new r(E,a);function j(e){return new t(e,"#elements-template",A).generateCard()}function w(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");V(t)}}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",alt:"Архыз"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg",alt:"Челябинская область"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg",alt:"Иваново"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg",alt:"Камчатка"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg",alt:"Холмогорский район"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg",alt:"Байкал"}].forEach((function(e){var t=j(e);document.querySelector(".elements").append(t)}));var V=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",w)},T=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",w)};function A(e,t){b.src=t,b.alt=e,g.textContent=e,T(m)}var B=function(){V(l)},I=function(e){e.target===e.currentTarget&&V(e.target)};c.addEventListener("click",(function(){T(l),y.value=f.textContent,h.value=v.textContent,y.dispatchEvent(new Event("input",{bubbles:!0}))})),u.addEventListener("click",B),k.addEventListener("submit",(function(e){e.preventDefault(),v.textContent=h.value,f.textContent=y.value,B()})),p.addEventListener("click",(function(){T(s),x.setSubmitButtonState()})),d.addEventListener("click",(function(){V(s)})),S.addEventListener("submit",(function(e){e.preventDefault();var t=j({name:L.value,link:q.value});document.querySelector(".elements").prepend(t),V(s),L.value="",q.value=""})),_.addEventListener("click",(function(){V(m)})),l.addEventListener("click",I),s.addEventListener("click",I),m.addEventListener("click",I),C.enableValidation(),x.enableValidation()})();